# 路径管理模块设计说明

## 1. 设计目标

路径管理模块用于统一处理系统中的文件路径，避免在业务代码中出现： -
硬编码路径 - 平台差异问题（Windows / Linux / macOS） - 路径拼接混乱 -
文件位置难以维护

核心原则： - 所有路径由一个模块统一生成 - repo / service
层不直接拼接字符串路径 - 保证跨平台一致性

------------------------------------------------------------------------

## 2. 模块职责范围

### 应负责

- 数据文件路径生成
- 配置文件路径管理
- 日志文件路径管理
- 临时文件路径管理
- 用户数据目录定位

### 不应负责

- 文件读写逻辑
- 数据解析
- 业务规则

------------------------------------------------------------------------

## 3. 推荐目录结构

```text
    project/
     ├── data/
     │    ├── reviews/
     │    └── cache/
     ├── logs/
     ├── config/
     └── src/
          └── path_manager.rs
```

------------------------------------------------------------------------

## 4. Rust 示例接口设计

``` rust
use std::path::{PathBuf};

pub struct PathManager {
    base_dir: PathBuf,
}

impl PathManager {
    pub fn new(base_dir: PathBuf) -> Self {
        Self { base_dir }
    }

    pub fn review_file(&self, id: &str) -> PathBuf {
        self.base_dir.join("data").join("reviews").join(format!("{}.json", id))
    }

    pub fn log_file(&self, name: &str) -> PathBuf {
        self.base_dir.join("logs").join(format!("{}.log", name))
    }

    pub fn config_file(&self, name: &str) -> PathBuf {
        self.base_dir.join("config").join(format!("{}.toml", name))
    }
}
```

------------------------------------------------------------------------

## 5. Repo 层使用方式

``` text
    repo -> 调用 PathManager 获取路径
    repo -> 执行文件读写
```

避免：

``` text
    repo 直接写:
    format!("data/reviews/{}.json", id)
```

------------------------------------------------------------------------

## 6. 跨平台注意事项

- 永远使用 PathBuf / Path
- 禁止手写 \\ 或 /
- 使用 join() 拼接路径

------------------------------------------------------------------------

## 7. 未来扩展方向

- 支持用户自定义数据目录
- 支持环境变量覆盖路径
- 支持云存储路径抽象层
- 自动创建缺失目录
